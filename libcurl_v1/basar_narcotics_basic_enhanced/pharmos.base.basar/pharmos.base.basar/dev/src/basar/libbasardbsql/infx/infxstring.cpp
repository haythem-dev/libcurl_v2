//----------------------------------------------------------------------------
/*! \file
 *  \brief  string class regarding Informix server codepage (illegal characters)
 *  \author Michael Eichenlaub
 *  \date   03.07.2009
 */
//----------------------------------------------------------------------------

#include "infxstring.h"

#include "libbasarcmnutil_locale.h"

//----------------------------------------------------------------------------
namespace basar	{
namespace db	{
namespace sql	{

#define SUBS	0x3f	//!< substitution character for not mapped characters Windows CP / ISO 8859 (prepared statements use 0x1a)

//----------------------------------------------------------------------------
//! allowed characters on DB server side for West charset; non-allowed 
//! characters are replaced by question marks.
static const UInt8 cvttblWest[] = 
{
	0x00, SUBS, SUBS, SUBS, SUBS, SUBS, SUBS, SUBS, SUBS, 0x09, 0x0a, SUBS, SUBS, 0x0d, SUBS, SUBS,		// 0x00
	SUBS, SUBS, SUBS, SUBS, SUBS, SUBS, SUBS, SUBS, SUBS, SUBS, SUBS, SUBS, SUBS, SUBS, SUBS, SUBS,		// 0x10
	0x20, 0x21, 0x22, 0x23, 0x24, 0x25, 0x26, 0x27, 0x28, 0x29, 0x2a, 0x2b, 0x2c, 0x2d, 0x2e, 0x2f,		// 0x20
	0x30, 0x31, 0x32, 0x33, 0x34, 0x35, 0x36, 0x37, 0x38, 0x39, 0x3a, 0x3b,	0x3c, 0x3d, 0x3e, 0x3f,		// 0x30
	0x40, 0x41, 0x42, 0x43,	0x44, 0x45, 0x46, 0x47,	0x48, 0x49, 0x4a, 0x4b,	0x4c, 0x4d, 0x4e, 0x4f,		// 0x40
	0x50, 0x51, 0x52, 0x53,	0x54, 0x55, 0x56, 0x57,	0x58, 0x59, 0x5a, 0x5b,	0x5c, 0x5d, 0x5e, 0x5f,		// 0x50
	0x60, 0x61, 0x62, 0x63,	0x64, 0x65, 0x66, 0x67,	0x68, 0x69, 0x6a, 0x6b,	0x6c, 0x6d, 0x6e, 0x6f,		// 0x60
	0x70, 0x71, 0x72, 0x73,	0x74, 0x75, 0x76, 0x77,	0x78, 0x79, 0x7a, 0x7b,	0x7c, 0x7d, 0x7e, SUBS,		// 0x70
// ISO 8859-5 is also used on Windows side (see localeenvinfx.cpp: LOCALE_ENV_INFX[])
	0x80, 0x81, 0x82, 0x83,	0x84, 0x85, 0x86, 0x87,	0x88, 0x89, 0x8a, 0x8b,	0x8c, 0x8d, 0x8e, 0x8f,		// 0x80
	0x90, 0x91, 0x92, 0x93,	0x94, 0x95, 0x96, 0x97,	0x98, 0x99, 0x9a, 0x9b,	0x9c, 0x9d, 0x9e, 0x9f,		// 0x90

	0xa0, 0xa1, 0xa2, 0xa3,	0xa4, 0xa5, 0xa6, 0xa7,	0xa8, 0xa9, 0xaa, 0xab,	0xac, 0xad, 0xae, 0xaf,		// 0xA0
	0xb0, 0xb1, 0xb2, 0xb3,	0xb4, 0xb5, 0xb6, 0xb7,	0xb8, 0xb9, 0xba, 0xbb,	0xbc, 0xbd, 0xbe, 0xbf,		// 0xB0
	0xc0, 0xc1, 0xc2, 0xc3,	0xc4, 0xc5, 0xc6, 0xc7,	0xc8, 0xc9, 0xca, 0xcb,	0xcc, 0xcd, 0xce, 0xcf,		// 0xC0
	0xd0, 0xd1, 0xd2, 0xd3,	0xd4, 0xd5, 0xd6, 0xd7,	0xd8, 0xd9, 0xda, 0xdb,	0xdc, 0xdd, 0xde, 0xdf,		// 0xD0
	0xe0, 0xe1, 0xe2, 0xe3,	0xe4, 0xe5, 0xe6, 0xe7,	0xe8, 0xe9, 0xea, 0xeb,	0xec, 0xed, 0xee, 0xef,		// 0xE0
	0xf0, 0xf1, 0xf2, 0xf3,	0xf4, 0xf5, 0xf6, 0xf7,	0xf8, 0xf9, 0xfa, 0xfb,	0xfc, 0xfd, 0xfe, 0xff,		// 0xF0
};

//! allowed characters on DB server side for East charset; non-allowed 
//! characters are replaced by question marks.
static const UInt8 cvttblEast[] = 
{
	0x00, SUBS, SUBS, SUBS,	SUBS, SUBS, SUBS, SUBS,	SUBS, 0x09, 0x0a, SUBS,	SUBS, 0x0d, SUBS, SUBS,		// 0x00
	SUBS, SUBS, SUBS, SUBS,	SUBS, SUBS, SUBS, SUBS,	SUBS, SUBS, SUBS, SUBS,	SUBS, SUBS, SUBS, SUBS,		// 0x10
	0x20, 0x21, 0x22, 0x23,	0x24, 0x25, 0x26, 0x27,	0x28, 0x29, 0x2a, 0x2b,	0x2c, 0x2d, 0x2e, 0x2f,		// 0x20
	0x30, 0x31, 0x32, 0x33,	0x34, 0x35, 0x36, 0x37,	0x38, 0x39, 0x3a, 0x3b,	0x3c, 0x3d, 0x3e, 0x3f,		// 0x30
	0x40, 0x41, 0x42, 0x43,	0x44, 0x45, 0x46, 0x47,	0x48, 0x49, 0x4a, 0x4b,	0x4c, 0x4d, 0x4e, 0x4f,		// 0x40
	0x50, 0x51, 0x52, 0x53,	0x54, 0x55, 0x56, 0x57,	0x58, 0x59, 0x5a, 0x5b,	0x5c, 0x5d, 0x5e, 0x5f,		// 0x50
	0x60, 0x61, 0x62, 0x63,	0x64, 0x65, 0x66, 0x67,	0x68, 0x69, 0x6a, 0x6b,	0x6c, 0x6d, 0x6e, 0x6f,		// 0x60
	0x70, 0x71, 0x72, 0x73,	0x74, 0x75, 0x76, 0x77,	0x78, 0x79, 0x7a, 0x7b,	0x7c, 0x7d, 0x7e, SUBS,		// 0x70

/*! \ingroup DIFF_WIN_UNIX */ 
#ifdef _WIN32	
	0x80, SUBS, SUBS, SUBS,	SUBS, SUBS, SUBS, SUBS,	SUBS, SUBS, 0x8a, SUBS,	0x8c, 0x8d, 0x8e, 0x8f,		// 0x80
	SUBS, SUBS, SUBS, SUBS,	SUBS, SUBS, SUBS, SUBS,	SUBS, SUBS, 0x9a, SUBS,	0x9c, 0x9d, 0x9e, 0x9f,		// 0x90
	0xa0, 0xa1, 0xa2, 0xa3,	0xa4, 0xa5, SUBS, 0xa7,	0xa8, SUBS, 0xaa, SUBS,	SUBS, 0xad, SUBS, 0xaf,		// 0xA0
	0xb0, SUBS, 0xb2, 0xb3,	0xb4, SUBS, SUBS, SUBS,	0xb8, 0xb9, 0xba, SUBS,								// 0xB0
#else
	SUBS, SUBS, SUBS, SUBS,	SUBS, SUBS, SUBS, SUBS,	SUBS, SUBS, SUBS, SUBS,	SUBS, SUBS, SUBS, SUBS,		// 0x80
	SUBS, SUBS, SUBS, SUBS,	SUBS, SUBS, SUBS, SUBS,	SUBS, SUBS, SUBS, SUBS,	SUBS, SUBS, SUBS, SUBS,		// 0x90
	0xa0, 0xa1, 0xa2, 0xa3,	0xa4, 0xa5, 0xa6, 0xa7,	0xa8, 0xa9, 0xaa, 0xab,	0xac, 0xad, 0xae, 0xaf,		// 0xA0
	0xb0, 0xb1, 0xb2, 0xb3,	0xb4, 0xb5, 0xb6, 0xb7,	0xb8, 0xb9, 0xba, 0xbb,								// 0xB0
#endif
																			0xbc, 0xbd, 0xbe, 0xbf,	
	0xc0, 0xc1, 0xc2, 0xc3,	0xc4, 0xc5, 0xc6, 0xc7,	0xc8, 0xc9, 0xca, 0xcb,	0xcc, 0xcd, 0xce, 0xcf,		// 0xC0
	0xd0, 0xd1, 0xd2, 0xd3,	0xd4, 0xd5, 0xd6, 0xd7,	0xd8, 0xd9, 0xda, 0xdb,	0xdc, 0xdd, 0xde, 0xdf,		// 0xD0	
	0xe0, 0xe1, 0xe2, 0xe3,	0xe4, 0xe5, 0xe6, 0xe7,	0xe8, 0xe9, 0xea, 0xeb,	0xec, 0xed, 0xee, 0xef,		// 0xE0	
	0xf0, 0xf1, 0xf2, 0xf3,	0xf4, 0xf5, 0xf6, 0xf7,	0xf8, 0xf9, 0xfa, 0xfb,	0xfc, 0xfd, 0xfe, 0xff,		// 0xF0
};

//! allowed characters on DB server side for Cyrillic charset; non-allowed 
//! characters are replaced by question marks.
static const UInt8 cvttblCyrillic[] = 
{
	0x00, SUBS, SUBS, SUBS,	SUBS, SUBS, SUBS, SUBS,	SUBS, 0x09, 0x0a, SUBS,	SUBS, 0x0d, SUBS, SUBS,		// 0x00
	SUBS, SUBS, SUBS, SUBS,	SUBS, SUBS, SUBS, SUBS,	SUBS, SUBS, SUBS, SUBS,	SUBS, SUBS, SUBS, SUBS,		// 0x10
	0x20, 0x21, 0x22, 0x23,	0x24, 0x25, 0x26, 0x27,	0x28, 0x29, 0x2a, 0x2b,	0x2c, 0x2d, 0x2e, 0x2f,		// 0x20
	0x30, 0x31, 0x32, 0x33,	0x34, 0x35, 0x36, 0x37,	0x38, 0x39, 0x3a, 0x3b,	0x3c, 0x3d, 0x3e, 0x3f,		// 0x30
	0x40, 0x41, 0x42, 0x43,	0x44, 0x45, 0x46, 0x47,	0x48, 0x49, 0x4a, 0x4b,	0x4c, 0x4d, 0x4e, 0x4f,		// 0x40
	0x50, 0x51, 0x52, 0x53,	0x54, 0x55, 0x56, 0x57,	0x58, 0x59, 0x5a, 0x5b,	0x5c, 0x5d, 0x5e, 0x5f,		// 0x50
	0x60, 0x61, 0x62, 0x63,	0x64, 0x65, 0x66, 0x67,	0x68, 0x69, 0x6a, 0x6b,	0x6c, 0x6d, 0x6e, 0x6f,		// 0x60
	0x70, 0x71, 0x72, 0x73,	0x74, 0x75, 0x76, 0x77,	0x78, 0x79, 0x7a, 0x7b,	0x7c, 0x7d, 0x7e, SUBS,		// 0x70
/*! \ingroup DIFF_WIN_UNIX */ 
#ifdef _WIN32	
	0x80, 0x81, SUBS, 0x83,	SUBS, SUBS, SUBS, SUBS,	SUBS, SUBS, 0x8a, SUBS,	0x8c, 0x8d, 0x8e, 0x8f,		// 0x80
	0x90, SUBS, SUBS, SUBS,	SUBS, SUBS, SUBS, SUBS,	SUBS, SUBS, 0x9a, SUBS,	0x9c, 0x9d, 0x9e, 0x9f,		// 0x90
	0xa0, 0xa1, 0xa2, 0xa3,	SUBS, SUBS, SUBS, 0xa7,	0xa8, SUBS, 0xaa, SUBS,	SUBS, 0xad, SUBS, 0xaf,		// 0xA0
	SUBS, SUBS, 0xb2, 0xb3,	SUBS, SUBS, SUBS, SUBS,	0xb8, 0xb9, 0xba, SUBS,								// 0xB0
#else
	SUBS, SUBS, SUBS, SUBS,	SUBS, SUBS, SUBS, SUBS,	SUBS, SUBS, SUBS, SUBS,	SUBS, SUBS, SUBS, SUBS,		// 0x80
	SUBS, SUBS, SUBS, SUBS,	SUBS, SUBS, SUBS, SUBS,	SUBS, SUBS, SUBS, SUBS,	SUBS, SUBS, SUBS, SUBS,		// 0x90
	0xa0, 0xa1, 0xa2, 0xa3,	0xa4, 0xa5, 0xa6, 0xa7,	0xa8, 0xa9, 0xaa, 0xab,	0xac, 0xad, 0xae, 0xaf,		// 0xA0
	0xb0, 0xb1, 0xb2, 0xb3,	0xb4, 0xb5, 0xb6, 0xb7,	0xb8, 0xb9, 0xba, 0xbb,								// 0xB0
#endif
																			0xbc, 0xbd, 0xbe, 0xbf,	
	0xc0, 0xc1, 0xc2, 0xc3,	0xc4, 0xc5, 0xc6, 0xc7,	0xc8, 0xc9, 0xca, 0xcb,	0xcc, 0xcd, 0xce, 0xcf,		// 0xC0
	0xd0, 0xd1, 0xd2, 0xd3,	0xd4, 0xd5, 0xd6, 0xd7,	0xd8, 0xd9, 0xda, 0xdb,	0xdc, 0xdd, 0xde, 0xdf,		// 0xD0	
	0xe0, 0xe1, 0xe2, 0xe3,	0xe4, 0xe5, 0xe6, 0xe7,	0xe8, 0xe9, 0xea, 0xeb,	0xec, 0xed, 0xee, 0xef,		// 0xE0	
	0xf0, 0xf1, 0xf2, 0xf3,	0xf4, 0xf5, 0xf6, 0xf7,	0xf8, 0xf9, 0xfa, 0xfb,	0xfc, 0xfd, 0xfe, 0xff,		// 0xF0
};

//----------------------------------------------------------------------------
// \throw no-throw
//
InfxString::InfxString	( const VarString & rStr) 
						: m_StrVar  (rStr)
{
    if ( rStr.empty() )
        return;

	convertVar(getConvTable());
}

//----------------------------------------------------------------------------
// \throw no-throw
//
InfxString::ConvertTable InfxString::getConvTable() const
{
	using basar::cmnutil::Locale;

	switch (Locale::getCodepage())
	{
	case Locale::CP_EAST:
		return cvttblEast;

	case Locale::CP_CYRILLIC:
		return cvttblCyrillic;

	case Locale::CP_WEST:
	default:
		return cvttblWest;
	}
}

//----------------------------------------------------------------------------
// \throw no-throw
//
ConstBuffer InfxString::out() const
{
	return m_StrVar.c_str();
}

//----------------------------------------------------------------------------
// \throw no-throw
//
void InfxString::convertVar(ConvertTable tbl)
{
	VarString::iterator       itCur = m_StrVar.begin();
	VarString::const_iterator itEnd = m_StrVar.end  ();

    while( itCur != itEnd )
    {
		*itCur = tbl[static_cast<UInt8>(*itCur)];	// replace character by character

        ++itCur;        
    }
}

//----------------------------------------------------------------------------
}	// namespace sql
}	// namespace db
}	// namespace basar

//---------------------------------------------------------------------------------------------
/*
		Informix: in non-prepared statement allowed characters: ch: codepoint, code: Informix error code
  =============================================================================================

		West (Latin 1):
  ---------------------------------------------------------------------------------------------
		ch 0x00   code  -282; ch 0x01   code  -202; ch 0x02   code  -202; ch 0x03   code  -202;
		ch 0x04   code  -202; ch 0x05   code  -202; ch 0x06   code  -202; ch 0x07   code  -202;
		ch 0x08   code  -202; ch 0x09   code     0; ch 0x0a   code  -282; ch 0x0b   code  -202;
		ch 0x0c   code  -202; ch 0x0d   code  -282; ch 0x0e   code  -202; ch 0x0f   code  -202;
		ch 0x10   code  -202; ch 0x11   code  -202; ch 0x12   code  -202; ch 0x13   code  -202;
		ch 0x14   code  -202; ch 0x15   code  -202; ch 0x16   code  -202; ch 0x17   code  -202;
		ch 0x18   code  -202; ch 0x19   code  -202; ch 0x1a   code  -202; ch 0x1b   code  -202;
		ch 0x1c   code  -202; ch 0x1d   code  -202; ch 0x1e   code  -202; ch 0x1f   code  -202;
		ch 0x20   code     0; ch 0x21   code     0; ch 0x22   code     0; ch 0x23   code     0;
		ch 0x24   code     0; ch 0x25   code     0; ch 0x26   code     0; ch 0x27   code  -282;
		ch 0x28   code     0; ch 0x29   code     0; ch 0x2a   code     0; ch 0x2b   code     0;
		ch 0x2c   code     0; ch 0x2d   code     0; ch 0x2e   code     0; ch 0x2f   code     0;
		ch 0x30   code     0; ch 0x31   code     0; ch 0x32   code     0; ch 0x33   code     0;
		ch 0x34   code     0; ch 0x35   code     0; ch 0x36   code     0; ch 0x37   code     0;
		ch 0x38   code     0; ch 0x39   code     0; ch 0x3a   code     0; ch 0x3b   code     0;
		ch 0x3c   code     0; ch 0x3d   code     0; ch 0x3e   code     0; ch 0x3f   code     0;
		ch 0x40   code     0; ch 0x41   code     0; ch 0x42   code     0; ch 0x43   code     0;
		ch 0x44   code     0; ch 0x45   code     0; ch 0x46   code     0; ch 0x47   code     0;
		ch 0x48   code     0; ch 0x49   code     0; ch 0x4a   code     0; ch 0x4b   code     0;
		ch 0x4c   code     0; ch 0x4d   code     0; ch 0x4e   code     0; ch 0x4f   code     0;
		ch 0x50   code     0; ch 0x51   code     0; ch 0x52   code     0; ch 0x53   code     0;
		ch 0x54   code     0; ch 0x55   code     0; ch 0x56   code     0; ch 0x57   code     0;
		ch 0x58   code     0; ch 0x59   code     0; ch 0x5a   code     0; ch 0x5b   code     0;
		ch 0x5c   code     0; ch 0x5d   code     0; ch 0x5e   code     0; ch 0x5f   code     0;
		ch 0x60   code     0; ch 0x61   code     0; ch 0x62   code     0; ch 0x63   code     0;
		ch 0x64   code     0; ch 0x65   code     0; ch 0x66   code     0; ch 0x67   code     0;
		ch 0x68   code     0; ch 0x69   code     0; ch 0x6a   code     0; ch 0x6b   code     0;
		ch 0x6c   code     0; ch 0x6d   code     0; ch 0x6e   code     0; ch 0x6f   code     0;
		ch 0x70   code     0; ch 0x71   code     0; ch 0x72   code     0; ch 0x73   code     0;
		ch 0x74   code     0; ch 0x75   code     0; ch 0x76   code     0; ch 0x77   code     0;
		ch 0x78   code     0; ch 0x79   code     0; ch 0x7a   code     0; ch 0x7b   code     0;
		ch 0x7c   code     0; ch 0x7d   code     0; ch 0x7e   code     0; ch 0x7f   code  -202;

 1252:	
		ch 0x80   code  -202; ch 0x81   code  -202; ch 0x82   code  -202; ch 0x83   code  -202;
		ch 0x84   code  -202; ch 0x85   code  -202; ch 0x86   code  -202; ch 0x87   code  -202;
		ch 0x88   code  -202; ch 0x89   code  -202; ch 0x8a   code  -202; ch 0x8b   code  -202;
		ch 0x8c   code  -202; ch 0x8d   code  -202; ch 0x8e   code  -202; ch 0x8f   code  -202;
		ch 0x90   code  -202; ch 0x91   code  -202; ch 0x92   code  -202; ch 0x93   code  -202;
		ch 0x94   code  -202; ch 0x95   code  -202; ch 0x96   code  -202; ch 0x97   code  -202;
		ch 0x98   code  -202; ch 0x99   code  -202; ch 0x9a   code  -202; ch 0x9b   code  -202;
		ch 0x9c   code  -202; ch 0x9d   code  -202; ch 0x9e   code  -202; ch 0x9f   code  -202;

 8859-1:
		ch 0x80   code     0; ch 0x81   code     0; ch 0x82   code     0; ch 0x83   code     0;
		ch 0x84   code     0; ch 0x85   code     0; ch 0x86   code     0; ch 0x87   code     0;
		ch 0x88   code     0; ch 0x89   code     0; ch 0x8a   code     0; ch 0x8b   code     0;
		ch 0x8c   code     0; ch 0x8d   code     0; ch 0x8e   code     0; ch 0x8f   code     0;
		ch 0x90   code     0; ch 0x91   code     0; ch 0x92   code     0; ch 0x93   code     0;
		ch 0x94   code     0; ch 0x95   code     0; ch 0x96   code     0; ch 0x97   code     0;
		ch 0x98   code     0; ch 0x99   code     0; ch 0x9a   code     0; ch 0x9b   code     0;
		ch 0x9c   code     0; ch 0x9d   code     0; ch 0x9e   code     0; ch 0x9f   code     0;

		ch 0xa0   code     0; ch 0xa1   code     0; ch 0xa2   code     0; ch 0xa3   code     0;
		ch 0xa4   code     0; ch 0xa5   code     0; ch 0xa6   code     0; ch 0xa7   code     0;
		ch 0xa8   code     0; ch 0xa9   code     0; ch 0xaa   code     0; ch 0xab   code     0;
		ch 0xac   code     0; ch 0xad   code     0; ch 0xae   code     0; ch 0xaf   code     0;
		ch 0xb0   code     0; ch 0xb1   code     0; ch 0xb2   code     0; ch 0xb3   code     0;
		ch 0xb4   code     0; ch 0xb5   code     0; ch 0xb6   code     0; ch 0xb7   code     0;
		ch 0xb8   code     0; ch 0xb9   code     0; ch 0xba   code     0; ch 0xbb   code     0;
		ch 0xbc   code     0; ch 0xbd   code     0; ch 0xbe   code     0; ch 0xbf   code     0;
		ch 0xc0   code     0; ch 0xc1   code     0; ch 0xc2   code     0; ch 0xc3   code     0;
		ch 0xc4   code     0; ch 0xc5   code     0; ch 0xc6   code     0; ch 0xc7   code     0;
		ch 0xc8   code     0; ch 0xc9   code     0; ch 0xca   code     0; ch 0xcb   code     0;
		ch 0xcc   code     0; ch 0xcd   code     0; ch 0xce   code     0; ch 0xcf   code     0;
		ch 0xd0   code     0; ch 0xd1   code     0; ch 0xd2   code     0; ch 0xd3   code     0;
		ch 0xd4   code     0; ch 0xd5   code     0; ch 0xd6   code     0; ch 0xd7   code     0;
		ch 0xd8   code     0; ch 0xd9   code     0; ch 0xda   code     0; ch 0xdb   code     0;
		ch 0xdc   code     0; ch 0xdd   code     0; ch 0xde   code     0; ch 0xdf   code     0;
		ch 0xe0   code     0; ch 0xe1   code     0; ch 0xe2   code     0; ch 0xe3   code     0;
		ch 0xe4   code     0; ch 0xe5   code     0; ch 0xe6   code     0; ch 0xe7   code     0;
		ch 0xe8   code     0; ch 0xe9   code     0; ch 0xea   code     0; ch 0xeb   code     0;
		ch 0xec   code     0; ch 0xed   code     0; ch 0xee   code     0; ch 0xef   code     0;
		ch 0xf0   code     0; ch 0xf1   code     0; ch 0xf2   code     0; ch 0xf3   code     0;
		ch 0xf4   code     0; ch 0xf5   code     0; ch 0xf6   code     0; ch 0xf7   code     0;
		ch 0xf8   code     0; ch 0xf9   code     0; ch 0xfa   code     0; ch 0xfb   code     0;
		ch 0xfc   code     0; ch 0xfd   code     0; ch 0xfe   code     0; ch 0xff   code     0;


		cyrillic:
  ---------------------------------------------------------------------------------------------
		ch 0x00   code  -282; ch 0x01   code  -202; ch 0x02   code  -202; ch 0x03   code  -202;
		ch 0x04   code  -202; ch 0x05   code  -202; ch 0x06   code  -202; ch 0x07   code  -202;
		ch 0x08   code  -202; ch 0x09   code     0; ch 0x0a   code  -282; ch 0x0b   code  -202;
		ch 0x0c   code  -202; ch 0x0d   code  -282; ch 0x0e   code  -202; ch 0x0f   code  -202;
		ch 0x10   code  -202; ch 0x11   code  -202; ch 0x12   code  -202; ch 0x13   code  -202;
		ch 0x14   code  -202; ch 0x15   code  -202; ch 0x16   code  -202; ch 0x17   code  -202;
		ch 0x18   code  -202; ch 0x19   code  -202; ch 0x1a   code  -202; ch 0x1b   code  -202;
		ch 0x1c   code  -202; ch 0x1d   code  -202; ch 0x1e   code  -202; ch 0x1f   code  -202;
		ch 0x20   code     0; ch 0x21   code     0; ch 0x22   code     0; ch 0x23   code     0;
		ch 0x24   code     0; ch 0x25   code     0; ch 0x26   code     0; ch 0x27   code  -282;
		ch 0x28   code     0; ch 0x29   code     0; ch 0x2a   code     0; ch 0x2b   code     0;
		ch 0x2c   code     0; ch 0x2d   code     0; ch 0x2e   code     0; ch 0x2f   code     0;
		ch 0x30   code     0; ch 0x31   code     0; ch 0x32   code     0; ch 0x33   code     0;
		ch 0x34   code     0; ch 0x35   code     0; ch 0x36   code     0; ch 0x37   code     0;
		ch 0x38   code     0; ch 0x39   code     0; ch 0x3a   code     0; ch 0x3b   code     0;
		ch 0x3c   code     0; ch 0x3d   code     0; ch 0x3e   code     0; ch 0x3f   code     0;
		ch 0x40   code     0; ch 0x41   code     0; ch 0x42   code     0; ch 0x43   code     0;
		ch 0x44   code     0; ch 0x45   code     0; ch 0x46   code     0; ch 0x47   code     0;
		ch 0x48   code     0; ch 0x49   code     0; ch 0x4a   code     0; ch 0x4b   code     0;
		ch 0x4c   code     0; ch 0x4d   code     0; ch 0x4e   code     0; ch 0x4f   code     0;
		ch 0x50   code     0; ch 0x51   code     0; ch 0x52   code     0; ch 0x53   code     0;
		ch 0x54   code     0; ch 0x55   code     0; ch 0x56   code     0; ch 0x57   code     0;
		ch 0x58   code     0; ch 0x59   code     0; ch 0x5a   code     0; ch 0x5b   code     0;
		ch 0x5c   code     0; ch 0x5d   code     0; ch 0x5e   code     0; ch 0x5f   code     0;
		ch 0x60   code     0; ch 0x61   code     0; ch 0x62   code     0; ch 0x63   code     0;
		ch 0x64   code     0; ch 0x65   code     0; ch 0x66   code     0; ch 0x67   code     0;
		ch 0x68   code     0; ch 0x69   code     0; ch 0x6a   code     0; ch 0x6b   code     0;
		ch 0x6c   code     0; ch 0x6d   code     0; ch 0x6e   code     0; ch 0x6f   code     0;
		ch 0x70   code     0; ch 0x71   code     0; ch 0x72   code     0; ch 0x73   code     0;
		ch 0x74   code     0; ch 0x75   code     0; ch 0x76   code     0; ch 0x77   code     0;
		ch 0x78   code     0; ch 0x79   code     0; ch 0x7a   code     0; ch 0x7b   code     0;
		ch 0x7c   code     0; ch 0x7d   code     0; ch 0x7e   code     0; ch 0x7f   code  -202;

  1251:
		ch 0x80   code     0; ch 0x81   code     0; ch 0x82   code  -202; ch 0x83   code     0;
		ch 0x84   code  -202; ch 0x85   code  -202; ch 0x86   code  -202; ch 0x87   code  -202;
		ch 0x88   code  -202; ch 0x89   code  -202; ch 0x8a   code     0; ch 0x8b   code  -202;
		ch 0x8c   code     0; ch 0x8d   code     0; ch 0x8e   code     0; ch 0x8f   code     0;
		ch 0x90   code     0; ch 0x91   code  -202; ch 0x92   code  -202; ch 0x93   code  -202;
		ch 0x94   code  -202; ch 0x95   code  -202; ch 0x96   code  -202; ch 0x97   code  -202;
		ch 0x98   code  -202; ch 0x99   code  -202; ch 0x9a   code     0; ch 0x9b   code  -202;
		ch 0x9c   code     0; ch 0x9d   code     0; ch 0x9e   code     0; ch 0x9f   code     0;
		ch 0xa0   code     0; ch 0xa1   code     0; ch 0xa2   code     0; ch 0xa3   code     0;
		ch 0xa4   code  -202; ch 0xa5   code  -202; ch 0xa6   code  -202; ch 0xa7   code     0;
		ch 0xa8   code     0; ch 0xa9   code  -202; ch 0xaa   code     0; ch 0xab   code  -202;
		ch 0xac   code  -202; ch 0xad   code     0; ch 0xae   code  -202; ch 0xaf   code     0;
		ch 0xb0   code  -202; ch 0xb1   code  -202; ch 0xb2   code     0; ch 0xb3   code     0;
		ch 0xb4   code  -202; ch 0xb5   code  -202; ch 0xb6   code  -202; ch 0xb7   code  -202;
		ch 0xb8   code     0; ch 0xb9   code     0; ch 0xba   code     0; ch 0xbb   code  -202;

  8859-5:
		ch 0x80   code  -202; ch 0x81   code  -202; ch 0x82   code  -202; ch 0x83   code  -202;
		ch 0x84   code  -202; ch 0x85   code  -202; ch 0x86   code  -202; ch 0x87   code  -202;
		ch 0x88   code  -202; ch 0x89   code  -202; ch 0x8a   code  -202; ch 0x8b   code  -202;
		ch 0x8c   code  -202; ch 0x8d   code  -202; ch 0x8e   code  -202; ch 0x8f   code  -202;
		ch 0x90   code  -202; ch 0x91   code  -202; ch 0x92   code  -202; ch 0x93   code  -202;
		ch 0x94   code  -202; ch 0x95   code  -202; ch 0x96   code  -202; ch 0x97   code  -202;
		ch 0x98   code  -202; ch 0x99   code  -202; ch 0x9a   code  -202; ch 0x9b   code  -202;
		ch 0x9c   code  -202; ch 0x9d   code  -202; ch 0x9e   code  -202; ch 0x9f   code  -202;
		ch 0xa0   code     0; ch 0xa1   code     0; ch 0xa2   code     0; ch 0xa3   code     0;
		ch 0xa4   code     0; ch 0xa5   code     0; ch 0xa6   code     0; ch 0xa7   code     0;
		ch 0xa8   code     0; ch 0xa9   code     0; ch 0xaa   code     0; ch 0xab   code     0;
		ch 0xac   code     0; ch 0xad   code     0; ch 0xae   code     0; ch 0xaf   code     0;
		ch 0xb0   code     0; ch 0xb1   code     0; ch 0xb2   code     0; ch 0xb3   code     0;
		ch 0xb4   code     0; ch 0xb5   code     0; ch 0xb6   code     0; ch 0xb7   code     0;
		ch 0xb8   code     0; ch 0xb9   code     0; ch 0xba   code     0; ch 0xbb   code     0;

		ch 0xbc   code     0; ch 0xbd   code     0; ch 0xbe   code     0; ch 0xbf   code     0;
		ch 0xc0   code     0; ch 0xc1   code     0; ch 0xc2   code     0; ch 0xc3   code     0;
		ch 0xc4   code     0; ch 0xc5   code     0; ch 0xc6   code     0; ch 0xc7   code     0;
		ch 0xc8   code     0; ch 0xc9   code     0; ch 0xca   code     0; ch 0xcb   code     0;
		ch 0xcc   code     0; ch 0xcd   code     0; ch 0xce   code     0; ch 0xcf   code     0;
		ch 0xd0   code     0; ch 0xd1   code     0; ch 0xd2   code     0; ch 0xd3   code     0;
		ch 0xd4   code     0; ch 0xd5   code     0; ch 0xd6   code     0; ch 0xd7   code     0;
		ch 0xd8   code     0; ch 0xd9   code     0; ch 0xda   code     0; ch 0xdb   code     0;
		ch 0xdc   code     0; ch 0xdd   code     0; ch 0xde   code     0; ch 0xdf   code     0;
		ch 0xe0   code     0; ch 0xe1   code     0; ch 0xe2   code     0; ch 0xe3   code     0;
		ch 0xe4   code     0; ch 0xe5   code     0; ch 0xe6   code     0; ch 0xe7   code     0;
		ch 0xe8   code     0; ch 0xe9   code     0; ch 0xea   code     0; ch 0xeb   code     0;
		ch 0xec   code     0; ch 0xed   code     0; ch 0xee   code     0; ch 0xef   code     0;
		ch 0xf0   code     0; ch 0xf1   code     0; ch 0xf2   code     0; ch 0xf3   code     0;
		ch 0xf4   code     0; ch 0xf5   code     0; ch 0xf6   code     0; ch 0xf7   code     0;
		ch 0xf8   code     0; ch 0xf9   code     0; ch 0xfa   code     0; ch 0xfb   code     0;
		ch 0xfc   code     0; ch 0xfd   code     0; ch 0xfe   code     0; ch 0xff   code     0;
*/
